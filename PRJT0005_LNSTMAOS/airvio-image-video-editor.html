<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIRVIO - AIæ™ºèƒ½å›¾ç‰‡å‰ªè¾‘ç¼–è¾‘å™¨</title>
    <style>
        /* MacOSé£æ ¼å˜é‡ */
        :root {
            --primary-color: #007AFF;
            --secondary-color: #5856D6;
            --success-color: #34C759;
            --warning-color: #FF9500;
            --error-color: #FF3B30;
            --background-color: #F2F2F7;
            --surface-color: #FFFFFF;
            --text-primary: #000000;
            --text-secondary: #8E8E93;
            --border-color: #C6C6C8;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            --border-radius: 8px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--background-color);
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* é¡¶éƒ¨å¯¼èˆªæ  */
        .navbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 60px;
            background: var(--surface-color);
            border-bottom: 1px solid var(--border-color);
            padding: 0 20px;
            box-shadow: var(--shadow);
            z-index: 1000;
            position: fixed;
            width: 100%;
            top: 0;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .brand-text {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .subtitle {
            font-size: 12px;
            color: var(--text-secondary);
            margin-left: 8px;
        }

        .nav-controls {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: #0056CC;
        }

        .btn-secondary {
            background: var(--background-color);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background: var(--border-color);
        }

        /* ä¸»å®¹å™¨ */
        .main-container {
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            height: calc(100vh - 60px);
            margin-top: 60px;
            gap: 1px;
            background: var(--border-color);
        }

        /* å·¦ä¾§å·¥å…·é¢æ¿ */
        .tools-panel {
            background: var(--surface-color);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .panel-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .panel-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .panel-subtitle {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .tools-section {
            padding: 20px;
        }

        .section-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .tool-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        .tool-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 16px;
            background: var(--background-color);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .tool-item:hover {
            background: #E3F2FD;
            border-color: var(--primary-color);
        }

        .tool-item.active {
            background: var(--primary-color);
            color: white;
        }

        .tool-icon {
            font-size: 24px;
            margin-bottom: 4px;
        }

        .tool-name {
            font-size: 12px;
            font-weight: 500;
            text-align: center;
        }

        /* åŠ¨æ€å­—æ®µé…ç½® */
        .field-config {
            padding: 20px;
            border-top: 1px solid var(--border-color);
        }

        .field-item {
            margin-bottom: 16px;
        }

        .field-label {
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 6px;
            color: var(--text-secondary);
        }

        .field-input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 14px;
            transition: var(--transition);
        }

        .field-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

        .field-slider {
            width: 100%;
            margin: 8px 0;
        }

        .field-value {
            font-size: 12px;
            color: var(--primary-color);
            font-weight: 600;
        }

        /* ä¸­å¤®ç¼–è¾‘åŒºåŸŸ */
        .editor-area {
            background: var(--surface-color);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .editor-toolbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
            background: var(--background-color);
        }

        .toolbar-group {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .toolbar-btn {
            width: 36px;
            height: 36px;
            border: none;
            border-radius: 6px;
            background: var(--surface-color);
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .toolbar-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        .toolbar-btn.active {
            background: var(--primary-color);
            color: white;
        }

        /* ç”»å¸ƒåŒºåŸŸ */
        .canvas-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: #1a1a1a;
            position: relative;
        }

        .canvas {
            width: 800px;
            height: 450px;
            background: #000;
            border-radius: var(--border-radius);
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .canvas-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(0, 122, 255, 0.1), rgba(88, 86, 214, 0.1));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            font-weight: 600;
        }

        .media-element {
            position: absolute;
            border: 2px solid var(--primary-color);
            border-radius: 4px;
            cursor: move;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .media-element.selected {
            border-color: var(--warning-color);
            box-shadow: 0 0 0 2px rgba(255, 149, 0, 0.3);
        }

        .resize-handle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: var(--warning-color);
            border-radius: 50%;
            cursor: nw-resize;
        }

        .resize-handle.top-left { top: -4px; left: -4px; }
        .resize-handle.top-right { top: -4px; right: -4px; cursor: ne-resize; }
        .resize-handle.bottom-left { bottom: -4px; left: -4px; cursor: sw-resize; }
        .resize-handle.bottom-right { bottom: -4px; right: -4px; cursor: se-resize; }

        /* æ—¶é—´è½´ */
        .timeline {
            height: 120px;
            background: var(--background-color);
            border-top: 1px solid var(--border-color);
            padding: 16px 20px;
        }

        .timeline-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .timeline-title {
            font-size: 14px;
            font-weight: 600;
        }

        .timeline-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .timeline-track {
            height: 60px;
            background: var(--surface-color);
            border-radius: var(--border-radius);
            position: relative;
            overflow-x: auto;
            border: 1px solid var(--border-color);
        }

        .timeline-clip {
            position: absolute;
            height: 40px;
            top: 10px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 4px;
            color: white;
            display: flex;
            align-items: center;
            padding: 0 12px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .timeline-clip:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .playhead {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--error-color);
            z-index: 10;
            left: 100px;
        }

        /* å³ä¾§å±æ€§é¢æ¿ */
        .properties-panel {
            background: var(--surface-color);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .properties-section {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .properties-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .property-group {
            margin-bottom: 20px;
        }

        .property-label {
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .property-row {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .property-input {
            flex: 1;
            padding: 6px 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 13px;
        }

        .property-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .color-picker {
            width: 40px;
            height: 32px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        /* AIç”Ÿæˆé¢æ¿ */
        .ai-panel {
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .ai-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .ai-prompt {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: var(--border-radius);
            font-size: 14px;
            margin-bottom: 12px;
            resize: vertical;
            min-height: 80px;
        }

        .ai-generate-btn {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: var(--border-radius);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .ai-generate-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .ai-suggestions {
            margin-top: 16px;
        }

        .suggestion-item {
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin-bottom: 8px;
            font-size: 12px;
            cursor: pointer;
            transition: var(--transition);
        }

        .suggestion-item:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Tokené¢„ç®—æ˜¾ç¤º */
        .token-budget {
            padding: 16px 20px;
            background: var(--background-color);
            border-top: 1px solid var(--border-color);
        }

        .budget-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .budget-title {
            font-size: 14px;
            font-weight: 600;
        }

        .budget-value {
            font-size: 14px;
            color: var(--primary-color);
            font-weight: 600;
        }

        .budget-bar {
            width: 100%;
            height: 6px;
            background: var(--border-color);
            border-radius: 3px;
            overflow: hidden;
        }

        .budget-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success-color), var(--warning-color));
            transition: var(--transition);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 260px 1fr 280px;
            }
        }

        @media (max-width: 768px) {
            .main-container {
                grid-template-columns: 1fr;
                grid-template-rows: auto 1fr auto;
            }
            
            .tools-panel,
            .properties-panel {
                height: auto;
                max-height: 300px;
            }

            .canvas {
                width: 100%;
                height: 300px;
            }
        }

        /* åŠ¨ç”»æ•ˆæœ */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .processing {
            animation: processing 2s infinite;
        }

        @keyframes processing {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        /* æ‹–æ‹½æ•ˆæœ */
        .dragging {
            opacity: 0.8;
            transform: scale(1.05);
            z-index: 1000;
        }

        .drop-zone {
            border: 2px dashed var(--primary-color);
            background: rgba(0, 122, 255, 0.1);
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-brand">
            <div class="logo">ğŸ¬</div>
            <div>
                <div class="brand-text">AIRVIO</div>
                <div class="subtitle">AIæ™ºèƒ½å›¾ç‰‡å‰ªè¾‘ç¼–è¾‘å™¨</div>
            </div>
        </div>
        <div class="nav-controls">
            <button class="btn btn-secondary" onclick="saveProject()">ğŸ’¾ ä¿å­˜</button>
            <button class="btn btn-primary" onclick="exportVideo()">ğŸ“¤ å¯¼å‡º</button>
            <button class="btn btn-secondary" onclick="previewVideo()">â–¶ï¸ é¢„è§ˆ</button>
        </div>
    </nav>

    <!-- ä¸»å®¹å™¨ -->
    <div class="main-container">
        <!-- å·¦ä¾§å·¥å…·é¢æ¿ -->
        <div class="tools-panel">
            <div class="panel-header">
                <div class="panel-title">ç¼–è¾‘å·¥å…·</div>
                <div class="panel-subtitle">AIé©±åŠ¨çš„æ™ºèƒ½å‰ªè¾‘å·¥å…·</div>
            </div>
            
            <!-- åŸºç¡€å·¥å…· -->
            <div class="tools-section">
                <div class="section-title">åŸºç¡€å·¥å…·</div>
                <div class="tool-grid">
                    <div class="tool-item active" data-tool="select">
                        <div class="tool-icon">ğŸ¯</div>
                        <div class="tool-name">é€‰æ‹©</div>
                    </div>
                    <div class="tool-item" data-tool="crop">
                        <div class="tool-icon">âœ‚ï¸</div>
                        <div class="tool-name">è£å‰ª</div>
                    </div>
                    <div class="tool-item" data-tool="text">
                        <div class="tool-icon">ğŸ“</div>
                        <div class="tool-name">æ–‡å­—</div>
                    </div>
                    <div class="tool-item" data-tool="filter">
                        <div class="tool-icon">ğŸ¨</div>
                        <div class="tool-name">æ»¤é•œ</div>
                    </div>
                </div>
            </div>

            <!-- AIå·¥å…· -->
            <div class="tools-section">
                <div class="section-title">AIå·¥å…·</div>
                <div class="tool-grid">
                    <div class="tool-item" data-tool="ai-enhance">
                        <div class="tool-icon">âœ¨</div>
                        <div class="tool-name">AIå¢å¼º</div>
                    </div>
                    <div class="tool-item" data-tool="ai-remove">
                        <div class="tool-icon">ğŸ—‘ï¸</div>
                        <div class="tool-name">æ™ºèƒ½ç§»é™¤</div>
                    </div>
                    <div class="tool-item" data-tool="ai-style">
                        <div class="tool-icon">ğŸ­</div>
                        <div class="tool-name">é£æ ¼è½¬æ¢</div>
                    </div>
                    <div class="tool-item" data-tool="ai-motion">
                        <div class="tool-icon">ğŸŒŠ</div>
                        <div class="tool-name">åŠ¨æ€æ•ˆæœ</div>
                    </div>
                </div>
            </div>

            <!-- åŠ¨æ€å­—æ®µé…ç½® -->
            <div class="field-config">
                <div class="section-title">åŠ¨æ€å­—æ®µé…ç½®</div>
                
                <div class="field-item">
                    <div class="field-label">åˆ†è¾¨ç‡</div>
                    <select class="field-input" id="resolution">
                        <option value="1920x1080">1920x1080 (Full HD)</option>
                        <option value="1280x720">1280x720 (HD)</option>
                        <option value="3840x2160">3840x2160 (4K)</option>
                    </select>
                </div>

                <div class="field-item">
                    <div class="field-label">å¸§ç‡</div>
                    <input type="range" class="field-slider" id="framerate" min="24" max="60" value="30">
                    <div class="field-value"><span id="framerateValue">30</span> fps</div>
                </div>

                <div class="field-item">
                    <div class="field-label">æ—¶é•¿</div>
                    <input type="number" class="field-input" id="duration" value="10" min="1" max="300">
                </div>

                <div class="field-item">
                    <div class="field-label">è´¨é‡</div>
                    <input type="range" class="field-slider" id="quality" min="1" max="10" value="8">
                    <div class="field-value">è´¨é‡: <span id="qualityValue">8</span>/10</div>
                </div>
            </div>
        </div>

        <!-- ä¸­å¤®ç¼–è¾‘åŒºåŸŸ -->
        <div class="editor-area">
            <!-- ç¼–è¾‘å™¨å·¥å…·æ  -->
            <div class="editor-toolbar">
                <div class="toolbar-group">
                    <button class="toolbar-btn" title="æ’¤é”€" onclick="undo()">â†¶</button>
                    <button class="toolbar-btn" title="é‡åš" onclick="redo()">â†·</button>
                    <button class="toolbar-btn" title="ç¼©æ”¾é€‚åº”" onclick="fitToScreen()">ğŸ”</button>
                </div>
                <div class="toolbar-group">
                    <span style="font-size: 14px; color: var(--text-secondary);">ç¼©æ”¾: 100%</span>
                </div>
                <div class="toolbar-group">
                    <button class="toolbar-btn" title="ç½‘æ ¼" onclick="toggleGrid()">âŠ</button>
                    <button class="toolbar-btn" title="æ ‡å°º" onclick="toggleRuler()">ğŸ“</button>
                    <button class="toolbar-btn" title="å¯¹é½" onclick="toggleSnap()">ğŸ§²</button>
                </div>
            </div>

            <!-- ç”»å¸ƒåŒºåŸŸ -->
            <div class="canvas-container" id="canvasContainer">
                <div class="canvas" id="mainCanvas">
                    <div class="canvas-overlay" id="canvasOverlay">
                        <div style="text-align: center;">
                            <div style="font-size: 24px; margin-bottom: 8px;">ğŸ¬</div>
                            <div>æ‹–æ‹½å›¾ç‰‡æˆ–è§†é¢‘åˆ°æ­¤å¤„å¼€å§‹ç¼–è¾‘</div>
                            <div style="font-size: 12px; opacity: 0.7; margin-top: 8px;">æ”¯æŒ JPG, PNG, MP4, MOV æ ¼å¼</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ—¶é—´è½´ -->
            <div class="timeline">
                <div class="timeline-header">
                    <div class="timeline-title">æ—¶é—´è½´</div>
                    <div class="timeline-controls">
                        <button class="toolbar-btn" onclick="playPause()">â–¶ï¸</button>
                        <button class="toolbar-btn" onclick="stopPlayback()">â¹ï¸</button>
                        <span style="font-size: 12px; color: var(--text-secondary);">00:00 / 00:10</span>
                    </div>
                </div>
                <div class="timeline-track" id="timelineTrack">
                    <div class="playhead" id="playhead"></div>
                    <div class="timeline-clip" style="left: 20px; width: 150px;">å›¾ç‰‡ç´ æ 1</div>
                    <div class="timeline-clip" style="left: 180px; width: 200px;">è§†é¢‘ç´ æ 1</div>
                </div>
            </div>
        </div>

        <!-- å³ä¾§å±æ€§é¢æ¿ -->
        <div class="properties-panel">
            <div class="panel-header">
                <div class="panel-title">å±æ€§é¢æ¿</div>
                <div class="panel-subtitle">å½“å‰é€‰ä¸­: æ— </div>
            </div>

            <!-- å˜æ¢å±æ€§ -->
            <div class="properties-section">
                <div class="properties-title">å˜æ¢</div>
                <div class="property-group">
                    <div class="property-label">ä½ç½®</div>
                    <div class="property-row">
                        <input type="number" class="property-input" placeholder="X" value="0">
                        <input type="number" class="property-input" placeholder="Y" value="0">
                    </div>
                </div>
                <div class="property-group">
                    <div class="property-label">å°ºå¯¸</div>
                    <div class="property-row">
                        <input type="number" class="property-input" placeholder="å®½åº¦" value="800">
                        <input type="number" class="property-input" placeholder="é«˜åº¦" value="450">
                    </div>
                </div>
                <div class="property-group">
                    <div class="property-label">æ—‹è½¬</div>
                    <input type="range" class="field-slider" min="-180" max="180" value="0">
                    <div class="field-value">0Â°</div>
                </div>
            </div>

            <!-- å¤–è§‚å±æ€§ -->
            <div class="properties-section">
                <div class="properties-title">å¤–è§‚</div>
                <div class="property-group">
                    <div class="property-label">ä¸é€æ˜åº¦</div>
                    <input type="range" class="field-slider" min="0" max="100" value="100">
                    <div class="field-value">100%</div>
                </div>
                <div class="property-group">
                    <div class="property-label">æ··åˆæ¨¡å¼</div>
                    <select class="property-input">
                        <option>æ­£å¸¸</option>
                        <option>å åŠ </option>
                        <option>æŸ”å…‰</option>
                        <option>å¼ºå…‰</option>
                    </select>
                </div>
            </div>

            <!-- AIç”Ÿæˆé¢æ¿ -->
            <div class="ai-panel">
                <div class="ai-title">
                    <span>ğŸ¤–</span>
                    <span>AIæ™ºèƒ½ç”Ÿæˆ</span>
                </div>
                <textarea class="ai-prompt" placeholder="æè¿°æ‚¨æƒ³è¦çš„æ•ˆæœï¼Œä¾‹å¦‚ï¼š\n- æ·»åŠ ç”µå½±çº§è°ƒè‰²\n- ç”ŸæˆåŠ¨æ€èƒŒæ™¯\n- åˆ›å»ºæ–‡å­—åŠ¨ç”»\n- æ™ºèƒ½åœºæ™¯è½¬æ¢"></textarea>
                <button class="ai-generate-btn" onclick="generateAIEffect()">ğŸš€ ç”Ÿæˆæ•ˆæœ</button>
                
                <div class="ai-suggestions">
                    <div class="suggestion-item" onclick="applyPreset('cinematic')">ğŸ¬ ç”µå½±çº§è°ƒè‰²</div>
                    <div class="suggestion-item" onclick="applyPreset('vintage')">ğŸ“¸ å¤å¤æ»¤é•œ</div>
                    <div class="suggestion-item" onclick="applyPreset('motion')">ğŸŒŠ åŠ¨æ€æ¨¡ç³Š</div>
                    <div class="suggestion-item" onclick="applyPreset('glow')">âœ¨ å‘å…‰æ•ˆæœ</div>
                </div>
            </div>

            <!-- Tokené¢„ç®— -->
            <div class="token-budget">
                <div class="budget-header">
                    <div class="budget-title">Tokené¢„ç®—</div>
                    <div class="budget-value">2,400 / 53,000</div>
                </div>
                <div class="budget-bar">
                    <div class="budget-fill" style="width: 4.5%;"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ç¼–è¾‘å™¨çŠ¶æ€ç®¡ç†
        class VideoEditor {
            constructor() {
                this.canvas = document.getElementById('mainCanvas');
                this.timeline = document.getElementById('timelineTrack');
                this.selectedElement = null;
                this.mediaElements = [];
                this.isPlaying = false;
                this.currentTime = 0;
                this.totalDuration = 10;
                this.tokenBudget = {
                    total: 53000,
                    used: 2400,
                    operations: {
                        'ai-enhance': 800,
                        'ai-style': 1200,
                        'ai-motion': 400
                    }
                };
                this.init();
            }

            init() {
                this.bindEvents();
                this.setupDragAndDrop();
                this.updateTokenDisplay();
                this.initializeSliders();
            }

            bindEvents() {
                // å·¥å…·é€‰æ‹©
                document.querySelectorAll('.tool-item').forEach(tool => {
                    tool.addEventListener('click', (e) => {
                        this.selectTool(tool.dataset.tool);
                    });
                });

                // ç”»å¸ƒç‚¹å‡»
                this.canvas.addEventListener('click', (e) => {
                    this.handleCanvasClick(e);
                });

                // æ—¶é—´è½´æ‹–æ‹½
                this.timeline.addEventListener('click', (e) => {
                    this.seekToPosition(e);
                });
            }

            setupDragAndDrop() {
                const canvasContainer = document.getElementById('canvasContainer');
                
                canvasContainer.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    canvasContainer.classList.add('drop-zone');
                });

                canvasContainer.addEventListener('dragleave', (e) => {
                    canvasContainer.classList.remove('drop-zone');
                });

                canvasContainer.addEventListener('drop', (e) => {
                    e.preventDefault();
                    canvasContainer.classList.remove('drop-zone');
                    this.handleFileDrop(e);
                });
            }

            selectTool(toolName) {
                // æ›´æ–°å·¥å…·é€‰æ‹©çŠ¶æ€
                document.querySelectorAll('.tool-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelector(`[data-tool="${toolName}"]`).classList.add('active');

                console.log(`é€‰æ‹©å·¥å…·: ${toolName}`);
                this.currentTool = toolName;
            }

            handleCanvasClick(e) {
                const rect = this.canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                console.log(`ç”»å¸ƒç‚¹å‡»ä½ç½®: (${x}, ${y})`);
                
                // å¦‚æœæ˜¯æ–‡å­—å·¥å…·ï¼Œæ·»åŠ æ–‡å­—å…ƒç´ 
                if (this.currentTool === 'text') {
                    this.addTextElement(x, y);
                }
            }

            handleFileDrop(e) {
                const files = Array.from(e.dataTransfer.files);
                files.forEach(file => {
                    if (this.isValidMediaFile(file)) {
                        this.addMediaElement(file);
                    }
                });
            }

            isValidMediaFile(file) {
                const validTypes = ['image/jpeg', 'image/png', 'video/mp4', 'video/quicktime'];
                return validTypes.includes(file.type);
            }

            addMediaElement(file) {
                const overlay = document.getElementById('canvasOverlay');
                overlay.style.display = 'none';

                const element = {
                    id: Date.now(),
                    type: file.type.startsWith('image/') ? 'image' : 'video',
                    file: file,
                    x: 50,
                    y: 50,
                    width: 200,
                    height: 150,
                    rotation: 0,
                    opacity: 100
                };

                this.mediaElements.push(element);
                this.renderElement(element);
                this.addToTimeline(element);
                
                console.log('æ·»åŠ åª’ä½“å…ƒç´ :', element);
            }

            addTextElement(x, y) {
                const element = {
                    id: Date.now(),
                    type: 'text',
                    content: 'åŒå‡»ç¼–è¾‘æ–‡å­—',
                    x: x - 50,
                    y: y - 20,
                    width: 100,
                    height: 40,
                    fontSize: 24,
                    color: '#FFFFFF',
                    fontFamily: 'Arial'
                };

                this.mediaElements.push(element);
                this.renderElement(element);
                this.addToTimeline(element);
            }

            renderElement(element) {
                const div = document.createElement('div');
                div.className = 'media-element';
                div.dataset.elementId = element.id;
                div.style.left = element.x + 'px';
                div.style.top = element.y + 'px';
                div.style.width = element.width + 'px';
                div.style.height = element.height + 'px';
                div.style.transform = `rotate(${element.rotation}deg)`;
                div.style.opacity = element.opacity / 100;

                if (element.type === 'text') {
                    div.innerHTML = element.content;
                    div.style.color = element.color;
                    div.style.fontSize = element.fontSize + 'px';
                    div.style.fontFamily = element.fontFamily;
                    div.style.display = 'flex';
                    div.style.alignItems = 'center';
                    div.style.justifyContent = 'center';
                    div.style.textAlign = 'center';
                } else {
                    div.innerHTML = `<div style="width: 100%; height: 100%; background: rgba(255,255,255,0.2); display: flex; align-items: center; justify-content: center; font-size: 12px; color: white;">${element.type.toUpperCase()}</div>`;
                }

                // æ·»åŠ è°ƒæ•´æ‰‹æŸ„
                ['top-left', 'top-right', 'bottom-left', 'bottom-right'].forEach(position => {
                    const handle = document.createElement('div');
                    handle.className = `resize-handle ${position}`;
                    div.appendChild(handle);
                });

                div.addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.selectElement(element.id);
                });

                this.canvas.appendChild(div);
            }

            selectElement(elementId) {
                // ç§»é™¤ä¹‹å‰çš„é€‰æ‹©çŠ¶æ€
                document.querySelectorAll('.media-element').forEach(el => {
                    el.classList.remove('selected');
                });

                // é€‰æ‹©æ–°å…ƒç´ 
                const element = document.querySelector(`[data-element-id="${elementId}"]`);
                if (element) {
                    element.classList.add('selected');
                    this.selectedElement = this.mediaElements.find(el => el.id == elementId);
                    this.updatePropertiesPanel();
                }
            }

            updatePropertiesPanel() {
                const subtitle = document.querySelector('.properties-panel .panel-subtitle');
                if (this.selectedElement) {
                    subtitle.textContent = `å½“å‰é€‰ä¸­: ${this.selectedElement.type.toUpperCase()}`;
                } else {
                    subtitle.textContent = 'å½“å‰é€‰ä¸­: æ— ';
                }
            }

            addToTimeline(element) {
                const clip = document.createElement('div');
                clip.className = 'timeline-clip';
                clip.style.left = (this.mediaElements.length * 160) + 'px';
                clip.style.width = '150px';
                clip.textContent = `${element.type} ${this.mediaElements.length}`;
                clip.dataset.elementId = element.id;
                
                clip.addEventListener('click', (e) => {
                    this.selectElement(element.id);
                });

                this.timeline.appendChild(clip);
            }

            seekToPosition(e) {
                const rect = this.timeline.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const percentage = x / rect.width;
                this.currentTime = percentage * this.totalDuration;
                
                const playhead = document.getElementById('playhead');
                playhead.style.left = x + 'px';
                
                console.log(`è·³è½¬åˆ°æ—¶é—´: ${this.currentTime.toFixed(2)}s`);
            }

            initializeSliders() {
                // å¸§ç‡æ»‘å—
                const framerateSlider = document.getElementById('framerate');
                const framerateValue = document.getElementById('framerateValue');
                framerateSlider.addEventListener('input', (e) => {
                    framerateValue.textContent = e.target.value;
                });

                // è´¨é‡æ»‘å—
                const qualitySlider = document.getElementById('quality');
                const qualityValue = document.getElementById('qualityValue');
                qualitySlider.addEventListener('input', (e) => {
                    qualityValue.textContent = e.target.value;
                });
            }

            updateTokenDisplay() {
                const budgetValue = document.querySelector('.budget-value');
                const budgetFill = document.querySelector('.budget-fill');
                
                budgetValue.textContent = `${this.tokenBudget.used.toLocaleString()} / ${this.tokenBudget.total.toLocaleString()}`;
                
                const percentage = (this.tokenBudget.used / this.tokenBudget.total) * 100;
                budgetFill.style.width = percentage + '%';
            }

            consumeTokens(operation, amount) {
                this.tokenBudget.used += amount;
                this.tokenBudget.operations[operation] = (this.tokenBudget.operations[operation] || 0) + amount;
                this.updateTokenDisplay();
                
                console.log(`Tokenæ¶ˆè€—: ${operation} - ${amount}T`);
            }
        }

        // å…¨å±€æ§åˆ¶å‡½æ•°
        function saveProject() {
            console.log('ä¿å­˜é¡¹ç›®');
            alert('é¡¹ç›®å·²ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨');
        }

        function exportVideo() {
            console.log('å¯¼å‡ºè§†é¢‘');
            editor.consumeTokens('export', 500);
            alert('è§†é¢‘å¯¼å‡ºä¸­ï¼Œè¯·ç¨å€™...');
        }

        function previewVideo() {
            console.log('é¢„è§ˆè§†é¢‘');
            editor.isPlaying = !editor.isPlaying;
            const btn = event.target;
            btn.textContent = editor.isPlaying ? 'â¸ï¸ æš‚åœ' : 'â–¶ï¸ é¢„è§ˆ';
        }

        function playPause() {
            editor.isPlaying = !editor.isPlaying;
            const btn = event.target;
            btn.textContent = editor.isPlaying ? 'â¸ï¸' : 'â–¶ï¸';
            console.log(editor.isPlaying ? 'æ’­æ”¾' : 'æš‚åœ');
        }

        function stopPlayback() {
            editor.isPlaying = false;
            editor.currentTime = 0;
            document.querySelector('.timeline-controls button').textContent = 'â–¶ï¸';
            document.getElementById('playhead').style.left = '0px';
            console.log('åœæ­¢æ’­æ”¾');
        }

        function undo() {
            console.log('æ’¤é”€æ“ä½œ');
        }

        function redo() {
            console.log('é‡åšæ“ä½œ');
        }

        function fitToScreen() {
            console.log('ç¼©æ”¾é€‚åº”å±å¹•');
        }

        function toggleGrid() {
            console.log('åˆ‡æ¢ç½‘æ ¼æ˜¾ç¤º');
            event.target.classList.toggle('active');
        }

        function toggleRuler() {
            console.log('åˆ‡æ¢æ ‡å°ºæ˜¾ç¤º');
            event.target.classList.toggle('active');
        }

        function toggleSnap() {
            console.log('åˆ‡æ¢å¯¹é½åŠŸèƒ½');
            event.target.classList.toggle('active');
        }

        function generateAIEffect() {
            const prompt = document.querySelector('.ai-prompt').value;
            if (!prompt.trim()) {
                alert('è¯·è¾“å…¥æ•ˆæœæè¿°');
                return;
            }
            
            console.log('ç”ŸæˆAIæ•ˆæœ:', prompt);
            editor.consumeTokens('ai-generate', 1200);
            
            // æ¨¡æ‹ŸAIç”Ÿæˆè¿‡ç¨‹
            const btn = event.target;
            btn.textContent = 'ğŸ”„ ç”Ÿæˆä¸­...';
            btn.classList.add('processing');
            
            setTimeout(() => {
                btn.textContent = 'ğŸš€ ç”Ÿæˆæ•ˆæœ';
                btn.classList.remove('processing');
                alert('AIæ•ˆæœç”Ÿæˆå®Œæˆï¼');
            }, 3000);
        }

        function applyPreset(presetType) {
            console.log('åº”ç”¨é¢„è®¾æ•ˆæœ:', presetType);
            editor.consumeTokens('preset', 300);
            
            const effects = {
                'cinematic': 'ç”µå½±çº§è°ƒè‰²å·²åº”ç”¨',
                'vintage': 'å¤å¤æ»¤é•œå·²åº”ç”¨',
                'motion': 'åŠ¨æ€æ¨¡ç³Šå·²åº”ç”¨',
                'glow': 'å‘å…‰æ•ˆæœå·²åº”ç”¨'
            };
            
            alert(effects[presetType] || 'æ•ˆæœå·²åº”ç”¨');
        }

        // åˆå§‹åŒ–ç¼–è¾‘å™¨
        let editor;
        document.addEventListener('DOMContentLoaded', () => {
            editor = new VideoEditor();
            
            // æ·»åŠ é¡µé¢åŠ è½½åŠ¨ç”»
            document.querySelectorAll('.tool-item, .property-group, .timeline-clip').forEach((item, index) => {
                item.style.animationDelay = (index * 0.05) + 's';
                item.classList.add('fade-in');
            });
            
            console.log('AIRVIO AIæ™ºèƒ½å›¾ç‰‡å‰ªè¾‘ç¼–è¾‘å™¨å·²å¯åŠ¨');
        });

        // é”®ç›˜å¿«æ·é”®
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey || e.metaKey) {
                switch (e.key) {
                    case 's':
                        e.preventDefault();
                        saveProject();
                        break;
                    case 'z':
                        e.preventDefault();
                        if (e.shiftKey) {
                            redo();
                        } else {
                            undo();
                        }
                        break;
                    case ' ':
                        e.preventDefault();
                        playPause();
                        break;
                }
            }
            
            // Deleteé”®åˆ é™¤é€‰ä¸­å…ƒç´ 
            if (e.key === 'Delete' && editor.selectedElement) {
                const elementDiv = document.querySelector(`[data-element-id="${editor.selectedElement.id}"]`);
                if (elementDiv) {
                    elementDiv.remove();
                    editor.mediaElements = editor.mediaElements.filter(el => el.id !== editor.selectedElement.id);
                    editor.selectedElement = null;
                    editor.updatePropertiesPanel();
                }
            }
        });
    </script>
</body>
</html>