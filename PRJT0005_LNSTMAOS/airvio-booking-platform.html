<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIRVIO - 动态字段预订平台</title>
    <style>
        /* MacOS风格变量 */
        :root {
            --primary-color: #007AFF;
            --secondary-color: #5856D6;
            --success-color: #34C759;
            --warning-color: #FF9500;
            --error-color: #FF3B30;
            --booking-color: #FF6B35;
            --platform-color: #4ECDC4;
            --background-color: #F2F2F7;
            --surface-color: #FFFFFF;
            --text-primary: #000000;
            --text-secondary: #8E8E93;
            --border-color: #C6C6C8;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            --border-radius: 8px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--background-color);
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* 顶部导航栏 */
        .navbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 60px;
            background: var(--surface-color);
            border-bottom: 1px solid var(--border-color);
            padding: 0 20px;
            box-shadow: var(--shadow);
            z-index: 1000;
            position: fixed;
            width: 100%;
            top: 0;
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--booking-color), var(--platform-color));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .brand-text {
            font-size: 18px;
            font-weight: 600;
            color: var(--booking-color);
        }

        .subtitle {
            font-size: 12px;
            color: var(--text-secondary);
            margin-left: 8px;
        }

        .nav-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .field-status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: var(--background-color);
            border-radius: var(--border-radius);
            font-size: 12px;
            font-weight: 500;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success-color);
        }

        /* 主容器 */
        .main-container {
            display: flex;
            height: calc(100vh - 60px);
            margin-top: 60px;
            gap: 1px;
            background: var(--border-color);
        }

        /* 左侧动态字段配置面板 */
        .sidebar {
            width: 320px;
            background: var(--surface-color);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .field-panel {
            padding: 20px;
        }

        .panel-section {
            margin-bottom: 24px;
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 16px;
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-icon {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: white;
        }

        .booking-icon {
            background: var(--booking-color);
        }

        .platform-icon {
            background: var(--platform-color);
        }

        .metrics-icon {
            background: var(--success-color);
        }

        .field-item {
            display: flex;
            flex-direction: column;
            padding: 12px;
            margin-bottom: 8px;
            background: var(--background-color);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .field-item:hover {
            background: #E5E5EA;
            transform: translateY(-1px);
        }

        .field-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .field-label {
            font-size: 13px;
            font-weight: 500;
        }

        .field-type {
            font-size: 10px;
            padding: 2px 6px;
            background: var(--primary-color);
            color: white;
            border-radius: 4px;
        }

        .field-value {
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .field-description {
            font-size: 11px;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        /* 右侧预订平台界面 */
        .content-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--surface-color);
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .view-tabs {
            display: flex;
            gap: 4px;
        }

        .tab {
            padding: 8px 16px;
            border: none;
            background: transparent;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            font-size: 14px;
            color: var(--text-secondary);
        }

        .tab:hover {
            background: var(--background-color);
        }

        .tab.active {
            background: var(--booking-color);
            color: white;
        }

        .content-workspace {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        /* 预订平台卡片 */
        .platform-card {
            background: var(--surface-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .card-header {
            background: linear-gradient(135deg, var(--booking-color), var(--platform-color));
            color: white;
            padding: 16px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .card-status {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
            background: rgba(255, 255, 255, 0.2);
        }

        .card-body {
            padding: 20px;
        }

        /* 动态表单生成区域 */
        .dynamic-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-section {
            background: var(--background-color);
            border-radius: var(--border-radius);
            padding: 16px;
        }

        .form-section-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--booking-color);
        }

        .form-field {
            margin-bottom: 12px;
        }

        .form-label {
            display: block;
            font-size: 12px;
            font-weight: 500;
            margin-bottom: 4px;
            color: var(--text-primary);
        }

        .form-input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 14px;
            transition: var(--transition);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--booking-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        .form-select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 14px;
            background: white;
        }

        /* 预订统计面板 */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            padding: 16px;
            background: var(--background-color);
            border-radius: var(--border-radius);
            text-align: center;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--booking-color);
        }

        .stat-trend {
            font-size: 11px;
            margin-top: 4px;
        }

        .trend-up {
            color: var(--success-color);
        }

        .trend-down {
            color: var(--error-color);
        }

        /* 预订流程可视化 */
        .booking-flow {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: var(--background-color);
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .flow-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 120px;
            padding: 12px;
            background: var(--surface-color);
            border-radius: var(--border-radius);
            border: 2px solid var(--border-color);
            transition: var(--transition);
        }

        .flow-step.active {
            border-color: var(--booking-color);
            background: rgba(255, 107, 53, 0.1);
        }

        .step-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--booking-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .step-title {
            font-size: 12px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 4px;
        }

        .step-status {
            font-size: 10px;
            color: var(--text-secondary);
        }

        .flow-arrow {
            color: var(--text-secondary);
            font-size: 18px;
        }

        /* 操作按钮 */
        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--booking-color);
            color: white;
        }

        .btn-primary:hover {
            background: #E55A2B;
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn-secondary {
            background: var(--platform-color);
            color: white;
        }

        .btn-secondary:hover {
            background: #45B7B8;
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn-outline {
            background: transparent;
            color: var(--booking-color);
            border: 2px solid var(--booking-color);
        }

        .btn-outline:hover {
            background: var(--booking-color);
            color: white;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                height: auto;
            }

            .dynamic-form {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .booking-flow {
                flex-direction: column;
                gap: 8px;
            }

            .flow-arrow {
                transform: rotate(90deg);
            }
        }

        /* 动画效果 */
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
    </style>
</head>
<body>
    <!-- 顶部导航栏 -->
    <nav class="navbar">
        <div class="nav-brand">
            <div class="logo">🏨</div>
            <div>
                <div class="brand-text">AIRVIO Booking Platform</div>
                <div class="subtitle">动态字段预订平台生成器</div>
            </div>
        </div>
        <div class="nav-controls">
            <div class="field-status">
                <div class="status-indicator"></div>
                <span>动态字段: 活跃</span>
            </div>
        </div>
    </nav>

    <!-- 主容器 -->
    <div class="main-container">
        <!-- 左侧动态字段配置面板 -->
        <div class="sidebar">
            <div class="field-panel">
                <!-- 基础字段配置 -->
                <div class="panel-section">
                    <div class="section-header">
                        <div class="section-title">
                            <div class="section-icon booking-icon">🏨</div>
                            基础预订字段
                        </div>
                    </div>
                    <div class="field-item" onclick="toggleField('customer_info')">
                        <div class="field-header">
                            <div class="field-label">客户信息</div>
                            <div class="field-type">OBJECT</div>
                        </div>
                        <div class="field-value">姓名、电话、邮箱</div>
                        <div class="field-description">客户基本联系信息收集</div>
                    </div>
                    <div class="field-item" onclick="toggleField('booking_dates')">
                        <div class="field-header">
                            <div class="field-label">预订日期</div>
                            <div class="field-type">DATE_RANGE</div>
                        </div>
                        <div class="field-value">入住-退房日期</div>
                        <div class="field-description">日期选择器组件</div>
                    </div>
                    <div class="field-item" onclick="toggleField('room_selection')">
                        <div class="field-header">
                            <div class="field-label">房间选择</div>
                            <div class="field-type">SELECT</div>
                        </div>
                        <div class="field-value">房型、数量、偏好</div>
                        <div class="field-description">动态房间类型选择</div>
                    </div>
                </div>

                <!-- 高级字段配置 -->
                <div class="panel-section">
                    <div class="section-header">
                        <div class="section-title">
                            <div class="section-icon platform-icon">⚙️</div>
                            高级功能字段
                        </div>
                    </div>
                    <div class="field-item" onclick="toggleField('special_requests')">
                        <div class="field-header">
                            <div class="field-label">特殊需求</div>
                            <div class="field-type">TEXTAREA</div>
                        </div>
                        <div class="field-value">自定义需求输入</div>
                        <div class="field-description">客户特殊要求收集</div>
                    </div>
                    <div class="field-item" onclick="toggleField('payment_method')">
                        <div class="field-header">
                            <div class="field-label">支付方式</div>
                            <div class="field-type">RADIO</div>
                        </div>
                        <div class="field-value">信用卡、支付宝、微信</div>
                        <div class="field-description">多种支付选项</div>
                    </div>
                    <div class="field-item" onclick="toggleField('loyalty_program')">
                        <div class="field-header">
                            <div class="field-label">会员计划</div>
                            <div class="field-type">CHECKBOX</div>
                        </div>
                        <div class="field-value">积分、优惠券</div>
                        <div class="field-description">会员权益选择</div>
                    </div>
                </div>

                <!-- 统计字段 -->
                <div class="panel-section">
                    <div class="section-header">
                        <div class="section-title">
                            <div class="section-icon metrics-icon">📊</div>
                            统计指标字段
                        </div>
                    </div>
                    <div class="field-item">
                        <div class="field-header">
                            <div class="field-label">转化率</div>
                            <div class="field-type">METRIC</div>
                        </div>
                        <div class="field-value">85%</div>
                        <div class="field-description">预订完成率统计</div>
                    </div>
                    <div class="field-item">
                        <div class="field-header">
                            <div class="field-label">平均订单价值</div>
                            <div class="field-type">CURRENCY</div>
                        </div>
                        <div class="field-value">¥1,280</div>
                        <div class="field-description">客单价分析</div>
                    </div>
                    <div class="field-item">
                        <div class="field-header">
                            <div class="field-label">客户满意度</div>
                            <div class="field-type">RATING</div>
                        </div>
                        <div class="field-value">4.8/5.0</div>
                        <div class="field-description">服务质量评分</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 右侧预订平台界面 -->
        <div class="content-area">
            <div class="content-header">
                <h2>动态预订平台界面</h2>
                <div class="view-tabs">
                    <button class="tab active" onclick="switchTab('booking')">预订表单</button>
                    <button class="tab" onclick="switchTab('management')">订单管理</button>
                    <button class="tab" onclick="switchTab('analytics')">数据分析</button>
                    <button class="tab" onclick="switchTab('settings')">字段配置</button>
                </div>
            </div>

            <div class="content-workspace">
                <!-- 预订平台概览卡片 -->
                <div class="platform-card slide-in">
                    <div class="card-header">
                        <div class="card-title">
                            <span>🏨</span>
                            动态预订表单
                        </div>
                        <div class="card-status">实时生成</div>
                    </div>
                    <div class="card-body">
                        <!-- 动态表单生成区域 -->
                        <div class="dynamic-form" id="dynamic-form">
                            <div class="form-section">
                                <div class="form-section-title">客户信息</div>
                                <div class="form-field">
                                    <label class="form-label">姓名 *</label>
                                    <input type="text" class="form-input" placeholder="请输入您的姓名" required>
                                </div>
                                <div class="form-field">
                                    <label class="form-label">手机号码 *</label>
                                    <input type="tel" class="form-input" placeholder="请输入手机号码" required>
                                </div>
                                <div class="form-field">
                                    <label class="form-label">邮箱地址</label>
                                    <input type="email" class="form-input" placeholder="请输入邮箱地址">
                                </div>
                            </div>

                            <div class="form-section">
                                <div class="form-section-title">预订信息</div>
                                <div class="form-field">
                                    <label class="form-label">入住日期 *</label>
                                    <input type="date" class="form-input" required>
                                </div>
                                <div class="form-field">
                                    <label class="form-label">退房日期 *</label>
                                    <input type="date" class="form-input" required>
                                </div>
                                <div class="form-field">
                                    <label class="form-label">房间类型 *</label>
                                    <select class="form-select" required>
                                        <option value="">请选择房间类型</option>
                                        <option value="standard">标准间 - ¥299/晚</option>
                                        <option value="deluxe">豪华间 - ¥499/晚</option>
                                        <option value="suite">套房 - ¥899/晚</option>
                                        <option value="presidential">总统套房 - ¥1999/晚</option>
                                    </select>
                                </div>
                                <div class="form-field">
                                    <label class="form-label">房间数量</label>
                                    <select class="form-select">
                                        <option value="1">1间</option>
                                        <option value="2">2间</option>
                                        <option value="3">3间</option>
                                        <option value="4">4间以上</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-section">
                                <div class="form-section-title">特殊需求</div>
                                <div class="form-field">
                                    <label class="form-label">特殊要求</label>
                                    <textarea class="form-input" rows="3" placeholder="请描述您的特殊需求（如：无烟房、高层、安静等）"></textarea>
                                </div>
                                <div class="form-field">
                                    <label class="form-label">支付方式</label>
                                    <select class="form-select">
                                        <option value="credit_card">信用卡</option>
                                        <option value="alipay">支付宝</option>
                                        <option value="wechat">微信支付</option>
                                        <option value="bank_transfer">银行转账</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- 操作按钮 -->
                        <div class="action-buttons">
                            <button class="btn btn-primary" onclick="submitBooking()">
                                <span>✅</span>
                                确认预订
                            </button>
                            <button class="btn btn-secondary" onclick="saveAsDraft()">
                                <span>💾</span>
                                保存草稿
                            </button>
                            <button class="btn btn-outline" onclick="resetForm()">
                                <span>🔄</span>
                                重置表单
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 预订统计卡片 -->
                <div class="platform-card slide-in">
                    <div class="card-header">
                        <div class="card-title">
                            <span>📊</span>
                            预订平台统计
                        </div>
                        <div class="card-status">实时更新</div>
                    </div>
                    <div class="card-body">
                        <!-- 统计数据网格 -->
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-label">今日预订</div>
                                <div class="stat-value" id="daily-bookings">127</div>
                                <div class="stat-trend trend-up">↗ +15% 较昨日</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">转化率</div>
                                <div class="stat-value">85%</div>
                                <div class="stat-trend trend-up">↗ +3% 本周</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">平均订单价值</div>
                                <div class="stat-value">¥1,280</div>
                                <div class="stat-trend trend-up">↗ +8% 本月</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">客户满意度</div>
                                <div class="stat-value">4.8</div>
                                <div class="stat-trend trend-up">↗ 持续优秀</div>
                            </div>
                        </div>

                        <!-- 预订流程可视化 -->
                        <div class="booking-flow">
                            <div class="flow-step active">
                                <div class="step-icon">🔍</div>
                                <div class="step-title">浏览房间</div>
                                <div class="step-status">用户搜索</div>
                            </div>
                            <div class="flow-arrow">→</div>
                            <div class="flow-step active">
                                <div class="step-icon">📝</div>
                                <div class="step-title">填写信息</div>
                                <div class="step-status">动态表单</div>
                            </div>
                            <div class="flow-arrow">→</div>
                            <div class="flow-step active">
                                <div class="step-icon">💳</div>
                                <div class="step-title">支付确认</div>
                                <div class="step-status">安全支付</div>
                            </div>
                            <div class="flow-arrow">→</div>
                            <div class="flow-step">
                                <div class="step-icon">✅</div>
                                <div class="step-title">预订成功</div>
                                <div class="step-status">确认通知</div>
                            </div>
                            <div class="flow-arrow">→</div>
                            <div class="flow-step">
                                <div class="step-icon">🏨</div>
                                <div class="step-title">入住体验</div>
                                <div class="step-status">服务评价</div>
                            </div>
                        </div>

                        <div class="action-buttons">
                            <button class="btn btn-primary" onclick="generateReport()">
                                <span>📊</span>
                                生成报告
                            </button>
                            <button class="btn btn-secondary" onclick="exportData()">
                                <span>📤</span>
                                导出数据
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 动态字段配置
        const dynamicFields = {
            PLATFORM_CONFIG: {
                name: "AIRVIO Booking Platform",
                version: "1.0.0",
                field_generation_engine: "active"
            },
            BOOKING_FIELDS: {
                customer_info: {
                    type: "object",
                    required: true,
                    fields: {
                        name: { type: "text", required: true, label: "姓名" },
                        phone: { type: "tel", required: true, label: "手机号码" },
                        email: { type: "email", required: false, label: "邮箱地址" }
                    }
                },
                booking_dates: {
                    type: "date_range",
                    required: true,
                    fields: {
                        check_in: { type: "date", required: true, label: "入住日期" },
                        check_out: { type: "date", required: true, label: "退房日期" }
                    }
                },
                room_selection: {
                    type: "select",
                    required: true,
                    options: [
                        { value: "standard", label: "标准间 - ¥299/晚", price: 299 },
                        { value: "deluxe", label: "豪华间 - ¥499/晚", price: 499 },
                        { value: "suite", label: "套房 - ¥899/晚", price: 899 },
                        { value: "presidential", label: "总统套房 - ¥1999/晚", price: 1999 }
                    ]
                },
                special_requests: {
                    type: "textarea",
                    required: false,
                    label: "特殊需求",
                    placeholder: "请描述您的特殊需求"
                },
                payment_method: {
                    type: "select",
                    required: true,
                    options: [
                        { value: "credit_card", label: "信用卡" },
                        { value: "alipay", label: "支付宝" },
                        { value: "wechat", label: "微信支付" },
                        { value: "bank_transfer", label: "银行转账" }
                    ]
                }
            },
            PLATFORM_METRICS: {
                daily_bookings: 127,
                conversion_rate: 85,
                average_order_value: 1280,
                customer_satisfaction: 4.8,
                total_revenue: 162560
            },
            BOOKING_FLOW_STAGES: [
                { id: "browse", name: "浏览房间", status: "active", icon: "🔍" },
                { id: "form", name: "填写信息", status: "active", icon: "📝" },
                { id: "payment", name: "支付确认", status: "active", icon: "💳" },
                { id: "confirmation", name: "预订成功", status: "pending", icon: "✅" },
                { id: "experience", name: "入住体验", status: "pending", icon: "🏨" }
            ]
        };

        // 切换标签页
        function switchTab(tabName) {
            // 移除所有活跃状态
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // 添加活跃状态到当前标签
            event.target.classList.add('active');
            
            console.log('切换到标签:', tabName);
            
            // 根据标签显示不同内容
            if (tabName === 'booking') {
                showBookingForm();
            } else if (tabName === 'management') {
                showOrderManagement();
            } else if (tabName === 'analytics') {
                showAnalytics();
            } else if (tabName === 'settings') {
                showFieldSettings();
            }
        }

        // 切换字段显示
        function toggleField(fieldName) {
            const field = dynamicFields.BOOKING_FIELDS[fieldName];
            if (field) {
                console.log('切换字段:', fieldName, field);
                // 这里可以添加动态显示/隐藏字段的逻辑
                regenerateForm();
            }
        }

        // 重新生成表单
        function regenerateForm() {
            console.log('基于动态字段配置重新生成表单...');
            // 这里可以添加动态表单生成逻辑
        }

        // 提交预订
        function submitBooking() {
            const formData = collectFormData();
            
            alert(`预订提交成功！\n\n预订信息:\n- 客户: ${formData.name || '未填写'}\n- 房型: ${formData.room_type || '未选择'}\n- 入住日期: ${formData.check_in || '未选择'}\n- 退房日期: ${formData.check_out || '未选择'}\n\n基于动态字段配置自动处理预订流程...`);
            
            // 更新统计数据
            updateBookingStats();
        }

        // 收集表单数据
        function collectFormData() {
            const formInputs = document.querySelectorAll('.form-input, .form-select');
            const data = {};
            
            formInputs.forEach(input => {
                if (input.value) {
                    data[input.name || input.type] = input.value;
                }
            });
            
            return data;
        }

        // 保存草稿
        function saveAsDraft() {
            const formData = collectFormData();
            localStorage.setItem('booking_draft', JSON.stringify(formData));
            alert('预订草稿已保存！');
        }

        // 重置表单
        function resetForm() {
            document.querySelectorAll('.form-input, .form-select').forEach(input => {
                input.value = '';
            });
            alert('表单已重置！');
        }

        // 更新预订统计
        function updateBookingStats() {
            const dailyBookingsElement = document.getElementById('daily-bookings');
            const currentBookings = parseInt(dailyBookingsElement.textContent);
            dailyBookingsElement.textContent = currentBookings + 1;
            
            // 添加动画效果
            dailyBookingsElement.classList.add('pulse');
            setTimeout(() => {
                dailyBookingsElement.classList.remove('pulse');
            }, 2000);
        }

        // 生成报告
        function generateReport() {
            const reportData = {
                timestamp: new Date().toISOString(),
                platform_metrics: dynamicFields.PLATFORM_METRICS,
                field_configuration: dynamicFields.BOOKING_FIELDS,
                booking_flow: dynamicFields.BOOKING_FLOW_STAGES
            };
            
            alert('正在生成预订平台报告...\n\n报告内容:\n- 平台统计数据\n- 字段配置信息\n- 预订流程分析\n- 用户行为数据');
        }

        // 导出数据
        function exportData() {
            const exportData = {
                platform_config: dynamicFields.PLATFORM_CONFIG,
                booking_fields: dynamicFields.BOOKING_FIELDS,
                metrics: dynamicFields.PLATFORM_METRICS,
                generated_at: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(exportData, null, 2)], {
                type: 'application/json'
            });
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'booking-platform-data.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // 显示不同的内容区域
        function showBookingForm() {
            console.log('显示预订表单');
        }

        function showOrderManagement() {
            alert('订单管理功能\n\n- 查看所有预订\n- 修改预订信息\n- 取消预订\n- 客户沟通记录');
        }

        function showAnalytics() {
            alert('数据分析功能\n\n- 预订趋势分析\n- 客户行为分析\n- 收入统计\n- 房间利用率\n- 客户满意度分析');
        }

        function showFieldSettings() {
            alert('字段配置功能\n\n- 添加自定义字段\n- 修改字段属性\n- 设置验证规则\n- 字段显示逻辑\n- 表单布局配置');
        }

        // 初始化页面
        document.addEventListener('DOMContentLoaded', function() {
            // 添加入场动画
            setTimeout(() => {
                document.querySelectorAll('.platform-card').forEach((card, index) => {
                    setTimeout(() => {
                        card.classList.add('slide-in');
                    }, index * 200);
                });
            }, 100);

            // 模拟实时数据更新
            setInterval(() => {
                const metrics = dynamicFields.PLATFORM_METRICS;
                
                // 随机更新一些统计数据
                if (Math.random() > 0.7) {
                    metrics.daily_bookings += Math.floor(Math.random() * 3);
                    const dailyElement = document.getElementById('daily-bookings');
                    if (dailyElement) {
                        dailyElement.textContent = metrics.daily_bookings;
                    }
                }
            }, 10000);

            // 加载保存的草稿
            const savedDraft = localStorage.getItem('booking_draft');
            if (savedDraft) {
                try {
                    const draftData = JSON.parse(savedDraft);
                    console.log('发现保存的预订草稿:', draftData);
                } catch (e) {
                    console.log('草稿数据解析失败');
                }
            }

            console.log('动态字段预订平台初始化完成', dynamicFields);
        });
    </script>
</body>
</html>